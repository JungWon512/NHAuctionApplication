<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.nh.controller.mapper.EntryInfoMapper">

    <!-- private StringProperty auctionHouseCode; // 거점코드
    private StringProperty entryNum; // 출품 번호
    private StringProperty entryType; // 출품 유형(큰소/송아지/육우)
    private StringProperty indNum; // 개체번호
    private StringProperty exhibitor; // 출하주
    private StringProperty birthday; // 생년월일
    private StringProperty gender; // 성별
    private StringProperty weight; // 중량
    private StringProperty kpn; // KPN
    private StringProperty cavingNum; // 산차
    private StringProperty mother; // 어미 혈통
    private StringProperty note; // 특이사항
    private StringProperty auctDateTime; // 경매일시
    private StringProperty entryStatus; // 출품상태
    private StringProperty startPrice; // 시작가
    private StringProperty isLastEntry; // 마지막 출품 여부

    private StringProperty successfulBidder;	// 낙찰자
    private StringProperty BiddingResult; 		// 낙찰결과
    private BooleanProperty isPending; 			// 보류 -->


    <!--TODO 경매 결과 관련 추가 해야함 -->
    <resultMap type="EntryInfo" id="entryInfoMap">
        <result property="mAuctionHouseCode" column="NA_BZPLC"/>
        <result property="mEntryNum" column="AUC_PRG_SQ"/>
        <result property="mEntryType" column="AUC_OBJ_DSC"/>
        <result property="mIndNum" column="SRA_INDV_AMNNO"/>
        <result property="mIndMngCd" column="SRA_SRS_DSC"/>
        <result property="mFhsNum" column="FHS_ID_NO"/>
        <result property="mFarmMngNum" column="FARM_AMNNO"/>
        <result property="mExhibitor" column="FTSNM"/>
        <result property="mBrandName" column="BRANDNM"/>
        <result property="mBirthday" column="BIRTH"/>
        <result property="mKpn" column="KPN_NO"/>
        <result property="mGender" column="INDV_SEX_C"/>
        <result property="mMotherTypeCode" column="MCOW_DSC"/>
        <result property="mMotherObjNum" column="MCOW_SRA_INDV_AMNNO"/>
        <result property="mMaTime" column="MATIME"/>
        <result property="mMaMonth" column="PRNY_MTCN"/>
        <result property="mPasgQcn" column="SRA_INDV_PASG_QCN"/>
        <result property="mObjIdNum" column="INDV_ID_NO"/>
        <result property="mObjRegNum" column="SRA_INDV_BRDSRA_RG_NO"/>
        <result property="mObjRegTypeNum" column="RG_DSC"/>
        <result property="mRgnName" column="SRA_PD_RGNNM"/>
        <result property="mDnaYn" column="DNA_YN"/>
        <result property="mIsNew" column="ANW_YN"/>
        <result property="mWeight" column="COW_SOG_WT"/>
        <result property="mInitPrice" column="FIR_LOWS_SBID_LMT_AM"/>
        <result property="mLowPrice" column="LOWS_SBID_LMT_AM"/>
        <result property="mNote" column="RMK_CNTN"/>
    </resultMap>

    <!-- 출품 데이터 추출 -->
    <select id="selectAllEntry" resultMap="entryInfoMap" resultType="linkedHashMap">
        SELECT B.AUC_PRG_SQ,
               A.NA_BZPLC,
               A.SRA_INDV_AMNNO,
               A.SRA_SRS_DSC,
               A.FHS_ID_NO,
               A.FARM_AMNNO,
               A.BIRTH,
               A.MCOW_DSC,
               A.KPN_NO,
               A.INDV_SEX_C,
               A.MCOW_SRA_INDV_AMNNO,
               A.MATIME,
               A.SRA_INDV_PASG_QCN,
               A.INDV_ID_NO,
               A.SRA_INDV_BRDSRA_RG_NO,
               A.RG_DSC,
               A.ANW_YN,
               B.COW_SOG_WT,
               B.AUC_OBJ_DSC,
               B.FIR_LOWS_SBID_LMT_AM,
               B.LOWS_SBID_LMT_AM,
               B.RMK_CNTN,
               B.BRANDNM,
               B.PRNY_MTCN,
               C.FTSNM
        FROM tb_la_is_mm_indv as A
                 JOIN
             tb_la_is_mh_sog_cow AS B
             ON
                 A.SRA_INDV_AMNNO = B.SRA_INDV_AMNNO
                 LEFT JOIN
             tb_la_is_mm_fhs AS C
             ON
                     B.NA_BZPLC = C.NA_BZPLC AND
                     B.FHS_ID_NO = C.FHS_ID_NO AND
                     B.FARM_AMNNO = C.FARM_AMNNO
        WHERE B.AUC_DT = #{auctionDate}
          AND B.NA_BZPLC = #{auctionHouseCode}
          AND B.AUC_OBJ_DSC = #{entryType}
        ORDER BY B.AUC_PRG_SQ ASC;
    </select>
</mapper>
